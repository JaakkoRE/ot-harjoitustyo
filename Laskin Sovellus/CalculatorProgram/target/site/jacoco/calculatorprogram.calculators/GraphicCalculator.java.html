<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fi"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GraphicCalculator.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">CalculatorProgram</a> &gt; <a href="index.source.html" class="el_package">calculatorprogram.calculators</a> &gt; <span class="el_source">GraphicCalculator.java</span></div><h1>GraphicCalculator.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package calculatorprogram.calculators;



import java.util.ArrayList;


/**
 *
 * @author Jaakko
 */
public class GraphicCalculator {
    Calculator calc;
    ArrayList&lt;Double&gt; resultList;
    private ArrayList&lt;String&gt; calculationArrayList;
    private ArrayList&lt;String&gt; calculationArrayListClone;
    private boolean brackets;
    private boolean absoluteValue;
    
<span class="nc" id="L25">    public GraphicCalculator() {</span>
<span class="nc" id="L26">        calc = new Calculator();</span>
         
<span class="nc" id="L28">    }</span>
    
    public ArrayList&lt;Double&gt; results(String calculatable, int upperBound, int lowerBound, double precision) throws Calculator.Exceptions {
<span class="nc" id="L31">        resultList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L32">        calcArrayListX(calculatable,  upperBound,  lowerBound,  precision);</span>
<span class="nc" id="L33">        return resultList;</span>
    }
    public void calcArrayListX(String text, int upperBound, int lowerBound, double precision) throws Calculator.Exceptions {
<span class="nc" id="L36">        this.calculationArrayList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L37">        this.calculationArrayListClone = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L38">        ArrayList&lt;Integer&gt; whereXIndex = new ArrayList&lt;&gt;();</span>
        //setting up arrayLists
<span class="nc" id="L40">        splitterX(text);</span>
<span class="nc" id="L41">        Boolean bracketsCopy = brackets;</span>
<span class="nc" id="L42">        Boolean absoluteValueCopy = absoluteValue;</span>
<span class="nc" id="L43">        cloneArrayListOtherWay();</span>
<span class="nc bnc" id="L44" title="All 2 branches missed.">        for (int i = 0; i &lt; calculationArrayList.size(); i++) {</span>
<span class="nc bnc" id="L45" title="All 2 branches missed.">            if (calculationArrayList.get(i).equals(&quot;x&quot;)) {</span>
<span class="nc" id="L46">                whereXIndex.add(i);</span>
            }
        }
            //iterate trough all x values
<span class="nc bnc" id="L50" title="All 2 branches missed.">        for (double k = lowerBound; k &lt;= upperBound; k += precision) {</span>
<span class="nc" id="L51">            k = Math.round(k * 100000.0) / 100000.0;</span>
                //clone values to original form
<span class="nc" id="L53">            brackets = bracketsCopy;</span>
<span class="nc" id="L54">            absoluteValue = absoluteValueCopy;</span>
<span class="nc" id="L55">            cloneArrayList();</span>
<span class="nc bnc" id="L56" title="All 2 branches missed.">            for (Integer index: whereXIndex) {    </span>
<span class="nc" id="L57">                calculationArrayList.set(index, k + &quot;&quot;);</span>
<span class="nc" id="L58">            }    </span>
<span class="nc bnc" id="L59" title="All 4 branches missed.">            if (!brackets &amp;&amp; !absoluteValue) {</span>
<span class="nc" id="L60">                String result = calc.calculate(calculationArrayList);</span>
<span class="nc bnc" id="L61" title="All 2 branches missed.">                if (result.equals(&quot;ääretön&quot;)) {</span>
<span class="nc" id="L62">                    resultList.add(200000.);</span>
                } else {
<span class="nc" id="L64">                    double resultVal = Double.valueOf(result);</span>
<span class="nc" id="L65">                    double resultRound = Math.round(resultVal * 1000000.0) / 1000000.0;</span>
<span class="nc" id="L66">                    resultList.add(resultRound);</span>
                }
<span class="nc" id="L68">            } else {</span>
                //solves absolute values and brackets before calculation
<span class="nc bnc" id="L70" title="All 2 branches missed.">                if (absoluteValue) {</span>
<span class="nc" id="L71">                    calculationArrayList = calc.absoluteValueSolver(calculationArrayList, absoluteValue);</span>
                }
<span class="nc bnc" id="L73" title="All 2 branches missed.">                if (brackets) {</span>
<span class="nc" id="L74">                    calculationArrayList = calc.bracketSolver(calculationArrayList, brackets);</span>
                }
<span class="nc" id="L76">                String result = calc.calculate(calculationArrayList);</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">                if (result.equals(&quot;ääretön&quot;)) {</span>
<span class="nc" id="L78">                    resultList.add(200000.);</span>
                } else {
<span class="nc" id="L80">                    double resultVal = Double.valueOf(result);</span>
<span class="nc" id="L81">                    double resultRound = Math.round(resultVal * 1000000.0) / 1000000.0;</span>
<span class="nc" id="L82">                    resultList.add(resultRound);</span>
                }
            }   
        }
<span class="nc" id="L86">    }</span>
    public void splitterX(String text) {
<span class="nc" id="L88">        String[] parts = text.split(&quot;(?&lt;=[\\+,\\-,\\:,\\^,\\*,\\/,\\(,\\),\\|,\\!,\\%,\\π,e,x])|(?=[\\+,\\-,\\:,\\^,\\*,\\/,\\(,\\),\\|,\\!,\\%,\\π,e,x])&quot;);</span>
<span class="nc bnc" id="L89" title="All 2 branches missed.">        for (int i = 0; i &lt; parts.length; i++) {</span>
<span class="nc" id="L90">            partCheckerX(i, parts);</span>
        }
<span class="nc" id="L92">    }</span>
    public void partCheckerX(int i, String[] parts) {
<span class="nc bnc" id="L94" title="All 2 branches missed.">        if (i &gt; 0) {</span>
<span class="nc bnc" id="L95" title="All 16 branches missed.">            if ((parts[i].equals(&quot;(&quot;) || parts[i].equals(&quot;e&quot;) || parts[i].equals(&quot;π&quot;) || parts[i].equals(&quot;x&quot;)) &amp;&amp; (calc.isNumber(parts[i - 1]) || parts[i - 1].equals(&quot;e&quot;) || parts[i - 1].equals(&quot;π&quot;) || parts[i - 1].equals(&quot;x&quot;))) {</span>
<span class="nc" id="L96">                calculationArrayList.add(&quot;*&quot;);</span>
            }
        }
<span class="nc bnc" id="L99" title="All 2 branches missed.">        if (parts[i].equals(&quot;)&quot;)) {</span>
<span class="nc" id="L100">            brackets = true;</span>
        }
<span class="nc bnc" id="L102" title="All 2 branches missed.">        if (parts[i].equals(&quot;|&quot;)) {</span>
<span class="nc" id="L103">            absoluteValue = true;</span>
        }
<span class="nc bnc" id="L105" title="All 2 branches missed.">        if (parts[i].equals(&quot;π&quot;)) {</span>
<span class="nc" id="L106">            calculationArrayList.add(3.1415926 + &quot;&quot;);</span>
<span class="nc bnc" id="L107" title="All 2 branches missed.">        } else if (parts[i].equals(&quot;e&quot;)) {</span>
<span class="nc" id="L108">            calculationArrayList.add(2.7182818 + &quot;&quot;);</span>
        } else {
<span class="nc" id="L110">            calculationArrayList.add(parts[i]);</span>
        }
<span class="nc" id="L112">    }</span>
    
    public void cloneArrayList() {
<span class="nc" id="L115">        calculationArrayList.clear();</span>
<span class="nc bnc" id="L116" title="All 2 branches missed.">        for (String s: calculationArrayListClone) {</span>
<span class="nc" id="L117">            calculationArrayList.add(s);</span>
<span class="nc" id="L118">        }</span>
       
<span class="nc" id="L120">    }</span>
    public void cloneArrayListOtherWay() {
<span class="nc bnc" id="L122" title="All 2 branches missed.">        for (String s: calculationArrayList) {</span>
<span class="nc" id="L123">            calculationArrayListClone.add(s);</span>
<span class="nc" id="L124">        }</span>
<span class="nc" id="L125">    }   </span>

    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span></div></body></html>